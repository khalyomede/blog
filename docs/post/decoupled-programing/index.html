<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Khalyomede - Khalyomede</title><meta name="gridsome:hash" content="3e98125a0a4072cde816a521b2aa372d32911504"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/blog/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/blog/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/blog/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/blog/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/blog/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/blog/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/blog/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/blog/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/blog/assets/css/0.styles.d144c95d.css" as="style"><link rel="preload" href="/blog/assets/js/app.d4d42d36.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-post-vue.50442e6e.js" as="script"><link rel="preload" href="/blog/assets/js/vue-remark--posts-decoupled-programing-md.6e116292.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.c17862a2.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-about-vue.61b01723.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.9654c1ee.js"><link rel="prefetch" href="/blog/assets/js/vue-remark--posts-quick-home-made-fuzzy-search-md.7b89a71c.js"><link rel="prefetch" href="/blog/assets/js/vue-remark--posts-when-to-use-sql-indxes-md.d1b9c1b0.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.d144c95d.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><header class="header"><strong><a href="/blog/" class="active">Khalyomede</a></strong><nav class="nav"><a href="/blog/" class="nav__link hover:underline active">Home</a><a href="/blog/about/" class="nav__link hover:underline">About</a></nav></header><h1 class="text-3xl mb-4">Decoupled programing</h1><div><p class="mb-2">Frameworks are legion today. At such point that if you don't learn some, you might get evinced from the game.</p><p class="mb-2">I am guilty of knowing <a href="https://laravel.com/" target="_blank" rel="nofollow noopener noreferrer" class="text-blue-600 hover:underline">Laravel</a>, <a href="https://laravel.com/" target="_blank" rel="nofollow noopener noreferrer" class="text-blue-600 hover:underline">Vue</a> and <a href="https://getbootstrap.com/" target="_blank" rel="nofollow noopener noreferrer" class="text-blue-600 hover:underline">Bootstrap</a>. These are still my go to tools at my job.</p><p class="mb-2">One day I watched <a href="https://www.youtube.com/watch?v=nmD1Q4FsXCc" target="_blank" rel="nofollow noopener noreferrer" class="text-blue-600 hover:underline">this video</a> about Rasmus speaking of his vision for PHP, a brief of the history of the language, and some of his thoughts.</p><p class="mb-2">I remember of one particular sentence in his talk:</p><blockquote><p class="block text-right text-gray-500 text-lg my-4">Today, frameworks ship too much. We should not have the database engine booted up for a static page. We should control what we want at a certain moment.</p></blockquote><p class="mb-2">I tried to find a way to work with decoupled components. At first it was an experiment, and then, I found I could go on with a functional router, then a view engine (Blade), then an ORM (Eloquent), etc...</p><h2 id="the-idea" class="mb-4 mt-2 text-2xl"><a href="#the-idea" aria-hidden="true" class="text-blue-600 hover:underline"><span class="icon icon-link"></span></a>The idea</h2><p class="mb-2">The concept is to create packages that are not aware of the outside world. This has several advantages:</p><ul class="list-disc list-inside mb-2"><li>You can pull the package anywhere, since you follow the setup code</li><li>The complexity is reduced because I consider dependency injection userland</li><li>The footprint is <strong>way</strong> much lower because I used functional programing first to delivery the easiest developer experience</li></ul><p class="mb-2">The core concept of these ready-to-pull packages is to solve one core issue the fastest possible.</p><p class="mb-2">For example, if you use <a href="https://github.com/folded/translation" target="_blank" rel="nofollow noopener noreferrer" class="text-blue-600 hover:underline">folded/translation</a>, you only have to tell the library where your translations are stored:</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">function</span> Folded\<span class="token package">setTranslationFolderPath</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">function</span> Folded\<span class="token package">setDefaultTranslationLang</span><span class="token punctuation">;</span>

<span class="token function">setTranslationFolderPath</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;path/to/langs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setDefaultTranslationLang</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;en&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p class="mb-2">That's all. Now you can use the library anywhere:</p><pre class="language-php"><code class="language-php"><span class="token keyword">use</span> <span class="token package">function</span> Folded\<span class="token package">setTranslationLang</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">function</span> Folded\<span class="token package">getTranslation</span><span class="token punctuation">;</span>

<span class="token function">setTranslationLang</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;fr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getTranslation</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;Welcome to my blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Bienvenue sur mon blog&quot;</span></code></pre><p class="mb-2">If you noticed, I have to use the namespace &quot;Folded&quot;. This is what makes the app light, because the code will only require these functions instead of loading a whole class for example.</p><h2 id="results-on-a-real-app" class="mb-4 mt-2 text-2xl"><a href="#results-on-a-real-app" aria-hidden="true" class="text-blue-600 hover:underline"><span class="icon icon-link"></span></a>Results on a real app</h2><p class="mb-2">I have built an app (that I currently do not know if I will release or no), which is about teaching about nature and science by displaying a feed of news and facts.</p><p class="mb-2">Using only decoupled packages (and aproximatively 80% of mine), I managed to use a maximum of 0.7 Mb of memory (and a serber latency of about 7-20 ms on an AWS free tier t2.micro server running Ubuntu 20).</p><p class="mb-2">For comparison, Laravel (no negatives critics intended) loads the hello world page with a memory peak usage of about 12 Mb. It's something that I expected since you got a whole lot of features, including Pipes, Validation, Eloquent and events, Queing, ... out of the box, and activated.</p><p class="mb-2">If I ever wanted to try to trim the maximum out of Laravel to keep on this example, I would have to dig in the provider file, and comment the services I don't use.</p><p class="mb-2">While this does the job, whenever you deactivate a service that you then want to use, you got to remember you commented it so you need to constantly keep track of this anytime you decide to use a new facade or so.</p><p class="mb-2">This is something you would never have to think of with decoupled programing since you are conscious of what you pull because you actually had to use <code>composer install</code> yourself. This offers the benefit of being more &quot;aware&quot; of what you got on your code base, and forces you to document yourself on what you use.</p><p class="mb-2">Without speaking on the fact that you are free to use whatever package you need, which is something you would not totally be able to do with frameworks that have made some choices (like using Blade for Laravel, that would make no sense to use anything else).</p><h2 id="the-downsides" class="mb-4 mt-2 text-2xl"><a href="#the-downsides" aria-hidden="true" class="text-blue-600 hover:underline"><span class="icon icon-link"></span></a>The downsides</h2><p class="mb-2">The main downside is the time you need to spend to document yourself to implement a new library to your web app. This is something that most of the time have been solved if you use a framewokr (queue management, ORM, logging, ...).</p><p class="mb-2">The other downside is the organisational part. Using a framework is a huge insurance for big companies since the framework is opniated on the way to organise views, models, commands, ... This downside can be a showstopper if you fear or do not have the right knowledge to organize correctly (which means the maintenance is tough).</p><p class="mb-2">But I have seen framework with bad code habits and wrong code organisation too, so this is something to debate. One can imagine setting a de-facto code structure and iterating on this even using decoupled programing (the proof is the people that use a <code>app/Model</code> folder, when Laravel natively put them in <code>app</code> folder, something that will change in version 8).</p><h2 id="conclusions" class="mb-4 mt-2 text-2xl"><a href="#conclusions" aria-hidden="true" class="text-blue-600 hover:underline"><span class="icon icon-link"></span></a>Conclusions</h2><p class="mb-2">A really fun experiment, that I think I will keep maturing and eventually propose for review to see if people show interest over this concept.</p><p class="mb-2">I feel in my opinion it is something quite related to functional programing, and this need to come back to the root of the algorithm itself, coming back to more simplicity.</p><p class="mb-2">So in the end, I think that it is another tool for a specific set of problems to solve. Not some fancy new way to develop web apps.</p></div></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Decoupled programing","excerpt":"A paradigm that augment flexibility and performance."}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.d4d42d36.js" defer></script><script src="/blog/assets/js/page--src-templates-post-vue.50442e6e.js" defer></script><script src="/blog/assets/js/vue-remark--posts-decoupled-programing-md.6e116292.js" defer></script>
  </body>
</html>
